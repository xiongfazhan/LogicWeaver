
-----

# ÈÄöÁî® AI Agent ‰∏öÂä°ÁÅµÈ≠ÇÊûÑÂª∫Âπ≥Âè∞ (Universal SOP Architect) v2.0

**Ê†∏ÂøÉÂÆö‰ΩçÔºö** ‰∏ìÂÆ∂ÁªèÈ™åÊï∞Â≠óÂåñÁºñËØëÂô® ‚Äî‚Äî Â∞Ü‰∫∫Á±ªÁöÑ‚ÄúÁõ¥Ëßâ‚Äù‰∏é‚ÄúÊµÅÁ®ã‚ÄùÁºñËØë‰∏∫ AI ÂèØÊâßË°åÁöÑ‰ª£Á†Å„ÄÇ

-----

## Á¨¨‰∏ÄÈò∂ÊÆµÔºöÈááÈõÜÁ´Ø ‚Äî‚Äî ‚Äú‰∏áËÉΩ‰∏öÂä°ÂàáÁâáÊú∫‚Äù

**Áî®Êà∑ËßíËâ≤Ôºö** ‰∏öÂä°‰∏ìÂÆ∂ÔºàËÄÅÂ∏àÂÇÖ„ÄÅËµÑÊ∑±Ê≥ïÂä°„ÄÅÈáëÁâåÂÆ¢ÊúçÁ≠âÔºâ
**‰∫§‰∫íÈÄªËæëÔºö** ‰æùÁÑ∂ÈááÁî®\*\*‚Äú4Ê≠•ÂæÆÂæ™ÁéØÔºàWizard UIÔºâ‚Äù\*\*Ôºå‰ΩÜÂú®Á¨¨3Ê≠•ÂíåÁ¨¨4Ê≠•ÂºïÂÖ•‰∫ÜÊ∑±Â∫¶Â¢ûÂº∫Ê®°Âùó„ÄÇ

### Âæ™ÁéØÊ≠•È™§ËØ¶Ëß£

#### Ê≠•È™§ AÔºöÈîÅÂÆöÂØπË±° (Context) ‚Äî‚Äî ‚ÄúÁúãÂì™ÂÑøÔºü‚Äù

  * **ÂºïÂØºËØ≠Ôºö** ‚ÄúËøô‰∏ÄÊ≠•Ôºå‰Ω†ÁöÑÊ≥®ÊÑèÂäõÈõÜ‰∏≠Âú®Âì™‰∏™Êñá‰ª∂ÊÆµËêΩ„ÄÅÂ±èÂπïÂå∫ÂüüÊàñÂÆûÁâ©‰∏äÔºü‚Äù
  * **ËæìÂÖ•Ôºö** [üì∑ ÊãçÁÖß/Êà™Âõæ] Êàñ [üìÑ Ê°ÜÈÄâÊñáÊú¨] Êàñ [üéôÔ∏è ËØ≠Èü≥ÊèèËø∞‰ΩçÁΩÆ]„ÄÇ

#### Ê≠•È™§ BÔºöÊèêÂèñ‰ø°ÊÅØ (Extraction) ‚Äî‚Äî ‚ÄúÊâæ‰ªÄ‰πàÔºü‚Äù

  * **ÂºïÂØºËØ≠Ôºö** ‚Äú‰Ω†ÈúÄË¶Å‰ªé‰∏≠ÊèêÂèñ‰ªÄ‰πàÂÖ∑‰Ωì‰ø°ÊÅØÔºüÔºàÊòØÊüê‰∏™Êï∞Â≠ó„ÄÅÊó•ÊúüÔºåËøòÊòØ‰∏ÄÁßçÊÑüËßâÔºüÔºâ‚Äù
  * **ËæìÂÖ•Ôºö** [‚å®Ô∏è ÂÖ≥ÈîÆËØç] Êàñ [üéôÔ∏è ËØ≠Èü≥ÊèèËø∞ÂÖ≥Ê≥®ÁÇπ]„ÄÇ

#### Ê≠•È™§ CÔºöÂà§Êñ≠ÈÄªËæë (Logic) ‚Äî‚Äî „ÄêÊ†∏ÂøÉÂçáÁ∫ßÔºöÊîØÊåÅ‚ÄúÂè™ÂèØÊÑè‰ºö‚Äù„Äë

  * **ÂéüÁóõÁÇπÔºö** ÂæàÂ§öÂà§Êñ≠ÔºàÂ¶Ç‚ÄúÁÆÄÂéÜ‰∏çÁ®≥ÂÆö‚Äù„ÄÅ‚ÄúÂ§ñÂ£≥ËÑèÊ±°‚ÄùÔºâÊó†Ê≥ïÁî® `>0.8` ËøôÁßçÁ°¨ËßÑÂàôÊèèËø∞„ÄÇ
  * **ÂçáÁ∫ßÂºïÂØºËØ≠Ôºö** ‚ÄúÂú®Ëøô‰∏™ÁéØËäÇÔºå‰Ω†ÊòØÈù†Ê≠ªËßÑÂÆöÔºàÁ°¨ËßÑÂàôÔºâËøòÊòØÈù†ÁªèÈ™åÊÑüËßâÔºàËΩØËßÑÂàôÔºâÔºü‚Äù
      * **ÂàÜÊîØ 1ÔºöÁ°¨ËßÑÂàôÔºàRule-BasedÔºâ**
          * *ËæìÂÖ•Ôºö* ‚ÄúÈáëÈ¢ùÂ§ß‰∫é 5000‚Äù„ÄÅ‚ÄúÊó•ÊúüÊó©‰∫é‰ªäÂ§©‚Äù„ÄÇ
      * **ÂàÜÊîØ 2ÔºöËΩØËßÑÂàôÔºàExample-Based / Few-ShotÔºâ**
          * *ËæìÂÖ•Ôºö* **‚ÄúÊàë‰πüËØ¥‰∏çÊ∏ÖÊ•öÊ†áÂáÜÔºå‰ΩÜÊàëÁªô‰Ω†‰∏æÂá†‰∏™‰æãÂ≠ê„ÄÇ‚Äù**
          * *Êìç‰ΩúÔºö*
              * [‚úÖ ‰∏ä‰º† 3 ‰∏™‚ÄúÂêàÊ†º‚ÄùÁöÑ‰æãÂ≠êÔºàÂõæÁâá/ÊñáÊú¨ÁâáÊÆµÔºâ]
              * [‚ùå ‰∏ä‰º† 3 ‰∏™‚Äú‰∏çÂêàÊ†º‚ÄùÁöÑ‰æãÂ≠êÔºàÂõæÁâá/ÊñáÊú¨ÁâáÊÆµÔºâ]
              * *Á≥ªÁªüÊóÅÁôΩÔºö* ‚ÄúÊ≤°ÂÖ≥Á≥ªÔºåÂè™ÈúÄ‰∏ä‰º†‰æãÂ≠êÔºåAI ‰ºöËá™Âä®Â≠¶‰π†ÊÇ®ÁöÑÂà§Êñ≠Ê†áÂáÜ„ÄÇ‚Äù

#### Ê≠•È™§ DÔºöÊâßË°åË∑ØÁî± (Routing) ‚Äî‚Äî „ÄêÊ†∏ÂøÉÂçáÁ∫ßÔºöÊîØÊåÅ‚ÄúÁúãÊÉÖÂÜµË∑≥ËΩ¨‚Äù„Äë

  * **ÂéüÁóõÁÇπÔºö** Âè™ËÉΩÁ∫øÊÄßÊâßË°å‚Äú‰∏ã‰∏ÄÊ≠•‚Äù„ÄÇ
  * **ÂçáÁ∫ßÂºïÂØºËØ≠Ôºö** ‚ÄúÂÅöÂÆåËøô‰∏ÄÊ≠•ÔºåÊ∞∏ËøúÊòØÂéªÂêå‰∏ÄÊ≠•ÂêóÔºüËøòÊòØËØ¥Ë¶ÅÁúãÊÉÖÂÜµÔºü‚Äù
  * **ËæìÂÖ•ÁïåÈù¢Ôºö** ÈÖçÁΩÆÁÆÄÂçïÁöÑ `If-Then` Ë∑≥ËΩ¨ÈÄªËæë„ÄÇ
      * *ÊÉÖÂÜµ 1Ôºö* ‚ÄúÂ¶ÇÊûú„ÄêÊ≠£Â∏∏/ÈÄöËøá„ÄëÔºåË∑≥ËΩ¨Âà∞ -\> [ ‰∏ã‰∏ÄÊ≠• / Ê≠•È™§ N ]‚Äù
      * *ÊÉÖÂÜµ 2Ôºö* ‚ÄúÂ¶ÇÊûú„ÄêÂºÇÂ∏∏/È©≥Âõû„ÄëÔºåË∑≥ËΩ¨Âà∞ -\> [ ÁªìÊùüÊµÅÁ®ã / Ê≠•È™§ XÔºàÂ§çÊ†∏Ôºâ]‚Äù

-----

## Á¨¨‰∫åÈò∂ÊÆµÔºö‰∫ßÂá∫Á´Ø ‚Äî‚Äî ‚ÄúÈÄöÁî®ÂºÄÂèëÂçèËÆÆ‚Äù (The Universal JSON Spec)

ËøôÊòØÁªôÂºÄÂèëÂõ¢ÈòüÔºàÊàñ Agent ÁºñÊéíÂºïÊìéÔºâÁúãÁöÑÊúÄÁªà‰∫ßÁâ©„ÄÇJSON ÁªìÊûÑËøõË°å‰∫ÜÈáçÂ§ßÂçáÁ∫ßÔºåÂ¢ûÂä†‰∫Ü `logic_strategy` Âíå `routing_map`„ÄÇ

### ÂçáÁ∫ßÁâà JSON Êï∞ÊçÆÂåÖÁ§∫‰æã

‰∏∫‰∫ÜÂ±ïÁ§∫‚ÄúÊ®°Á≥äÈÄªËæë‚ÄùÂíå‚ÄúÂä®ÊÄÅË∑ØÁî±‚ÄùÔºåÊàë‰ª¨‰ª•\*\*‚ÄúÁÆÄÂéÜÂàùÁ≠õ Agent‚Äù\*\*‰∏∫‰æãÔºö

```json
{
  "step_id": 105,
  "step_name": "Review_Career_Stability",
  "business_domain": "HR_RECRUITMENT",

  // 1. ËæìÂÖ•ËßÑÊ†ºÔºöÂëäËØâ AI ÁúãÂì™Èáå
  "input_spec": {
    "data_source": "PDF_RESUME",
    "target_section": "Work_Experience",
    "context_description": "Candidate's job history over the last 5 years"
  },

  // 2. Â§ÑÁêÜÈÄªËæëÔºö„ÄêÂçáÁ∫ß„ÄëÊîØÊåÅ Few-Shot Ê®°Á≥äÂà§Êñ≠
  "logic_config": {
    "logic_strategy": "SEMANTIC_SIMILARITY", // Á≠ñÁï•ÔºöËØ≠‰πâÁõ∏‰ººÂ∫¶/Â∞èÊ†∑Êú¨Â≠¶‰π† (ÈùûÁ°¨ËßÑÂàô)
    
    // AI ÁöÑ‚ÄúÂ§ßËÑëÂèÇËÄÉÁ≥ª‚ÄùÔºöÂü∫‰∫éÁî®Êà∑‰∏ä‰º†ÁöÑ‰æãÂ≠êÁîüÊàê
    "few_shot_examples": [
      {
        "content": "2Âπ¥Êç¢4‰ªΩÂ∑•‰ΩúÔºå‰∏îË°å‰∏öË∑®Â∫¶Â§ß...",
        "label": "UNSTABLE",
        "description": "È¢ëÁπÅË∑≥ÊßΩ‰∏îÊó†‰∏ªÁ∫ø"
      },
      {
        "content": "5Âπ¥Âú®Âêå‰∏ÄÂÆ∂ÂÖ¨Âè∏‰ªé‰∏ìÂëòÂçáËá≥ÁªèÁêÜ...",
        "label": "STABLE",
        "description": "ÊôãÂçáË∑ØÂæÑÊ∏ÖÊô∞"
      }
    ],
    
    // ÈªòËÆ§ÂÖúÂ∫ïÊèêÁ§∫ËØç
    "evaluation_prompt": "Based on the examples, determine if the candidate is STABLE or UNSTABLE."
  },

  // 3. Ë∑ØÁî±Êò†Â∞ÑÔºö„ÄêÂçáÁ∫ß„ÄëÂëäËØâ AI ‰∏ã‰∏ÄÊ≠•ÂéªÂì™Èáå
  "routing_map": {
    "default_next": "step_106", // ÈªòËÆ§Âéª‰∏ã‰∏ÄÊ≠•
    "branches": [
      {
        "condition_result": "UNSTABLE",
        "action_type": "REJECT_CANDIDATE",
        "next_step_id": "end_process_reject" // Ë∑ØÁî±Ë∑≥ËΩ¨ÔºöÁõ¥Êé•ÁªìÊùü
      },
      {
        "condition_result": "STABLE",
        "action_type": "MARK_PASS",
        "next_step_id": "step_106" // Ë∑ØÁî±Ë∑≥ËΩ¨ÔºöËøõÂÖ•‰∏ã‰∏ÄËΩÆÈù¢ËØïÂÆâÊéí
      }
    ]
  },

  // 4. ËæìÂá∫ÁªìÊûÑ
  "output_schema": {
    "fields": [
      { "name": "stability_score", "type": "float" },
      { "name": "reasoning_summary", "type": "string" }
    ]
  }
}
```

-----

## Á¨¨‰∏âÈò∂ÊÆµÔºöÂ§çÊ†∏Á´Ø ‚Äî‚Äî ‚ÄúÂèåÂ±èÁ°ÆËÆ§ + Áä∂ÊÄÅÊú∫ËßÜÂõæ‚Äù

### 1\. Â∑¶ÊñáÂè≥ËØëÁïåÈù¢ (Split Screen)

Âú®‚ÄúÈÄªËæëÔºàLogicÔºâ‚ÄùÈÉ®ÂàÜÁöÑÂ§çÊ†∏‰∏≠ÔºåÁïåÈù¢‰ºöÊúâÊòéÊòæÂèòÂåñÔºö

  * **Â∑¶‰æßÔºàÁî®Êà∑ËæìÂÖ•ÔºâÔºö**
      * ÊòæÁ§∫Áî®Êà∑‰∏ä‰º†ÁöÑ 3 Âº†‚ÄúÂ•ΩÂõæ‚ÄùÂíå 3 Âº†‚ÄúÂùèÂõæ‚Äù„ÄÇ
      * ÊòæÁ§∫Áî®Êà∑ÂΩïÈü≥ËΩ¨ÊñáÂ≠óÔºö‚ÄúÂ¶ÇÊûúÂÉèËøôÂá†Âº†Âõæ‰∏ÄÊ†∑‰π±ÔºåÂ∞±Áõ¥Êé•ÈÄÄÂõû„ÄÇ‚Äù
  * **Âè≥‰æßÔºàAI ÁêÜËß£ÔºâÔºö**
      * **Á≠ñÁï•Ôºö** [üß† Ê®°Á≥äÂåπÈÖçÊ®°Âºè] (Fuzzy Matching)
      * **ËßÑÂàôÊëòË¶ÅÔºö** ‚ÄúAI Â∞ÜÂü∫‰∫éÊÇ®Êèê‰æõÁöÑ 6 ‰∏™Ê°à‰æãÔºåËØÑ‰º∞ÁõÆÊ†á‰∏éÊ°à‰æãÁöÑËØ≠‰πâ/ËßÜËßâÁõ∏‰ººÂ∫¶„ÄÇ‚Äù
      * **Ë∑ØÁî±ÈÄªËæëÔºö**
          * üî¥ Ëã•Âà§ÂÆö‰∏∫‚ÄúÂùè‚Äù ‚ûî Ë∑≥ËΩ¨Ê≠•È™§ 5 (ÈÄÄÂõû)
          * üü¢ Ëã•Âà§ÂÆö‰∏∫‚ÄúÂ•Ω‚Äù ‚ûî Ë∑≥ËΩ¨Ê≠•È™§ 3 (ÁªßÁª≠)

### 2\. ÂÖ®ÊôØÊµÅÁ®ãÂõæ (State Machine View)

  * **ÂçáÁ∫ßÂâçÔºö** Âè™Êúâ‰∏ÄÊù°ÂûÇÁõ¥Âêë‰∏ãÁöÑÊó∂Èó¥ËΩ¥„ÄÇ
  * **ÂçáÁ∫ßÂêéÔºö** **ÁΩëÁä∂ÊãìÊâëÂõæ**„ÄÇ
      * ‰∏ªÊµÅÁ®ãÂú®‰∏≠Èó¥ÂûÇÁõ¥Âêë‰∏ã„ÄÇ
      * **ÂºÇÂ∏∏ÂàÜÊîØ**ÔºàÂ¶ÇÔºö‰∏çÂêàÊ†º„ÄÅÈúÄË¶Å‰∫∫Â∑•‰ªãÂÖ•Ôºâ‰ºö‰ª•Á∫¢Ëâ≤Á∫øÊù°‰ªéËäÇÁÇπÂºïÂá∫ÔºåÊåáÂêëÊµÅÁ®ãÁªìÊùüÊàñÂõûÊªöÂà∞‰πãÂâçÁöÑÊ≠•È™§„ÄÇ
      * ÊØè‰∏™ËäÇÁÇπÂç°Áâá‰∏äÔºå‰æùÁÑ∂ÂµåÂÖ•Áî®Êà∑‰∏ä‰º†ÁöÑ**Ê†∏ÂøÉÂèÇËÄÉÂõæ/Á§∫‰æãÂõæ**„ÄÇ

-----

---

# UI/UX Design Specifications v2.0

## 1. Design System (ËßÜËßâËØÜÂà´Á≥ªÁªü)

* **Framework:** Next.js + Tailwind CSS + Shadcn/UI (Lucide React Icons).
* **Visual Style:** "Clean Industrial" (ÁêÜÊÄß„ÄÅÂÖãÂà∂„ÄÅÈ´òÂØπÊØîÂ∫¶).
* **Color Palette:**
    * **Background:** `bg-slate-50` (App bg), `bg-white` (Card bg).
    * **Primary Action:** `bg-indigo-600` (Main Buttons, Active States).
    * **Sidebar:** `bg-slate-900` or `bg-white` with `border-r`.
    * **Status Indicators:**
        * üü¢ Success: `text-emerald-600`, `bg-emerald-50`, `border-emerald-200`.
        * üîµ Active/Info: `text-indigo-600`, `bg-indigo-50`, `border-indigo-200`.
        * üî¥ Error/Destructive: `text-rose-600`, `bg-rose-50`, `border-rose-200`.
* **Typography:** Inter (System Sans-serif). Headers should be bold and tight.

---

## 2. Core Layouts (Ê†∏ÂøÉÈ°µÈù¢Â∏ÉÂ±Ä)

### Layout A: Dashboard (È¶ñÈ°µÂ∑•‰ΩúÂè∞)
* **Structure:** Standard Grid Layout.
* **Header:** Title "My SOP Workflows" + User Avatar.
* **Content:** A grid of cards (`grid-cols-3`).
    * **Create Card:** First card is a dashed-border button `border-dashed` with a large Plus icon and text "Create New Workflow".
    * **SOP Cards:** Display Cover Image (top half), Title, Last Edited Date, and a Badge for status (Draft/Deployed).

### Layout B: Workflow Setup Modal (Â∑•‰ΩúÊµÅÂàùÂßãÂåñÂºπÁ™ó)
* **Component:** `Dialog` (Shadcn).
* **Trigger:** Click on "Create New Workflow".
* **Form Fields:**
    * **Name:** Input (Required).
    * **Description:** Textarea.
    * **Cover Image:** Single file upload zone.
* **Action:** Primary Button "Start Building" -> Redirects to *Layout C*.

### Layout C: The Builder Workspace (Ê†∏ÂøÉÈááÈõÜÂô® - ‰æßËæπÊ†èÂ∏ÉÂ±Ä)
**ËøôÊòØÊú¨Ê¨°Êõ¥Êñ∞ÁöÑÈáçÁÇπÔºåÈááÁî® Sidebar + Main Content ÁªìÊûÑ„ÄÇ**

* **Container:** `h-screen flex overflow-hidden`.

#### 1. Left Sidebar (Macro-Navigation / ÂÆèËßÇÂØºËà™)
* **Width:** Fixed `w-64` or `w-72`, `border-r`, `bg-white`.
* **Header:** Workflow Title (Editable) + "Back to Dashboard" icon.
* **ScrollArea:** A vertical list of **Workflow Steps** (Step 1, Step 2...).
    * **Item State - Completed:** Icon `CheckCircle` (Green), text dimmed.
    * **Item State - Active:** Icon `CircleDot` (Blue), background `bg-indigo-50`, text bold.
    * **Item State - Future:** Icon `Circle` (Gray), text muted.
* **Footer:** Sticky at bottom.
    * Button: `+ Add New Step` (Ghost variant, full width).

#### 2. Right Main Panel (The Wizard Canvas / ËØ¶ÁªÜÈááÈõÜÂå∫)
* **Background:** `bg-slate-50`.
* **Top Bar (Micro-Navigation / ÂæÆËßÇËøõÂ∫¶):**
    * A horizontal segmented progress indicator for the **Current Step**.
    * Segments: `Context (A)` -> `Extraction (B)` -> `Logic (C)` -> `Routing (D)`.
    * Show clearly which micro-step is active.
* **Center Stage (Content):**
    * Render the specific **Input Card** based on the current micro-step (see Section 3).
    * Layout: Centered, max-width `max-w-2xl`.
* **Bottom Bar (Action):**
    * Left: `Previous` (Ghost).
    * Right: `Next` (Solid Primary).
    * *Note:* If on Step D (Routing), button text changes to "Finish Step".

---

## 3. Component Details (ÁªÑ‰ª∂ÁªÜËäÇËßÑËåÉ)

### Wizard Card: Step C (Logic Definition)
**Scenario:** User defines rules or uploads examples.
* **Toggle Switch:** A large `Tabs` component centered.
    * Tab 1: "Hard Rules" (Icon: Ruler).
    * Tab 2: "Experience / Few-Shot" (Icon: Brain) -> **Default**.
* **Upload Zones (Few-Shot Mode):**
    * **Container:** `grid grid-cols-2 gap-4`.
    * **Left Zone (Pass):** `border-2 border-dashed border-emerald-200 bg-emerald-50/30`. Title: "‚úÖ Passing Examples".
    * **Right Zone (Fail):** `border-2 border-dashed border-rose-200 bg-rose-50/30`. Title: "‚ùå Failing Examples".
    * **Thumbnails:** Images should have rounded corners and a remove (X) button.

### Wizard Card: Step D (Routing Configuration)
**Scenario:** User defines branching logic.
* **Layout:** Vertical Stack (`flex-col gap-3`).
* **Default Card:** Simple Card, text "Default: Go to Next Step".
* **Branch Card:**
    * Styling: Left border colored (Red/Orange).
    * Structure:
        * **Header:** "If result is [FAIL]..."
        * **Body:** Arrow icon `ArrowRight` pointing to "Action: [End Process]".
    * **Action:** Add a small "Remove Branch" button.
* **Add Button:** Dashed button at bottom "+ Add Condition Branch".

---

## 4. Review & Output Layouts (‰∫§‰ªò‰∏é‰∫ßÂá∫)

### Layout D: Split Screen Review (ÂèåÂ±èÂ§çÊ†∏)
* **Container:** `grid grid-cols-2 h-full`.
* **Left Panel (Source):** `bg-slate-100 p-6 overflow-y-auto`.
    * Display raw inputs: User Audio Transcript (Chat bubble style), Images, uploaded examples.
* **Right Panel (AI Protocol):** `bg-white p-6 overflow-y-auto border-l`.
    * Display JSON logic as UI Cards.
    * Use `Badge` for key-values (e.g., `Strategy: Semantic`).
* **Floating Footer:** Glassmorphism effect. Button: "Generate Flowchart".

### Layout E: Visual Flowchart (ÊµÅÁ®ãÂõæ)
* **Library:** ReactFlow.
* **Node Style:** "Rich Card Node".
    * Must include: Title + **Thumbnail Image** (from Step A) + Status Badge.
    * Dimensions: approx 200px wide.
* **Edges:**
    * Success Path: Green, label "Pass".
    * Failure Path: Red, label "Fail/Reject".

---

